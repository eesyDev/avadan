{"version":3,"file":"main.js","sources":["main.js"],"sourcesContent":["jQuery(function($){\n  const $wrap = $('.map__wrapper');\n  const svg   = $wrap.find('svg')[0];\n\n  // Собираем ключи из карточек в порядке показа\n  const keys = $('.map__card').map(function(){ return $(this).data('key'); }).get();\n\n  console.log(keys)\n  let autoIdx = 0, autoTimer = null, isPaused = false;\n\n  // Позиционируем карточки возле соответствующих пинов\n  function positionCards(){\n    if($wrap && $wrap[0]) {  const wrapRect = $wrap[0].getBoundingClientRect();}\n    $('.map__card').each(function(){\n      const key = $(this).data('key');\n      const node = svg.querySelector('.pin[data-key=\"'+key+'\"]');\n      if(!node) return;\n      const bb = node.getBoundingClientRect();\n      const x = bb.left + bb.width/2 - wrapRect.left;\n      const y = bb.top  - wrapRect.top;\n      // позиция сверху и немного левее центра пина\n      $(this).css({ left: x+'px', top: y+'px' });\n    });\n  }\n\n  function clearActive(){\n    $('.map__card').removeClass('is-visible');\n    $(svg).find('.region, .pin').removeClass('is-active');\n  }\n\n  function showByKey(key){\n    clearActive();\n    $('.map__card[data-key=\"'+key+'\"]').addClass('is-visible');\n    const $region = $(svg).find('.region[data-key=\"'+key+'\"]');\n    const $pin    = $(svg).find('.pin[data-key=\"'+key+'\"]');\n    $region.addClass('is-active');\n    $pin.addClass('is-active');\n  }\n\n  function startAutoplay(){\n    stopAutoplay();\n    autoTimer = setInterval(function(){\n      if(isPaused || keys.length === 0) return;\n      showByKey(keys[autoIdx]);\n      autoIdx = (autoIdx + 1) % keys.length;\n    }, 1800); // скорость \"вспышек\"\n  }\n\n  function stopAutoplay(){\n    if(autoTimer){ clearInterval(autoTimer); autoTimer = null; }\n  }\n\n  // Наведение по региону или пину: показываем нужную карточку и паузим автоплей\n  $(svg).on('mouseenter touchstart', '.region, .pin', function(){\n    isPaused = true;\n    const key = $(this).data('key');\n    if(key) showByKey(key);\n  });\n\n  // Ушли курсором со svg — продолжаем автопоказ\n  $(svg).on('mouseleave touchend', function(){\n    isPaused = false;\n  });\n\n  // Клик по пину/региону — фиксируем карточку до следующего ухода мыши\n  $(svg).on('click', '.region, .pin', function(){\n    const key = $(this).data('key');\n    if(key){\n      stopAutoplay();\n      showByKey(key);\n    }\n  });\n\n  // Восстановить автоплей при уходе мыши с обёртки\n  $wrap.on('mouseleave', function(){\n    isPaused = false;\n    startAutoplay();\n  });\n\n  // Дебаунс-resize для корректной привязки позиций\n  let rAF;\n  function onResize(){ \n    cancelAnimationFrame(rAF);\n    rAF = requestAnimationFrame(positionCards);\n  }\n  $(window).on('load resize', onResize);\n\n  // Инициализация\n  positionCards();\n  showByKey(keys[0]);  // начальный показ первой карточки\n  startAutoplay();\n\n\n   \n\n  $('.gallery-slider').slick({\n    centerMode: true,\n    centerPadding: '0',\n    slidesToShow: 5,   // показываем 5 слайдов\n    infinite: true,\n    arrows: true,\n    dots: true\n  });\n\n  $('.director-slider').slick({\n    centerMode: true,\n    centerPadding: '0',\n    slidesToShow: 1,   // показываем 5 слайдов\n    infinite: true,\n    autoplay: true,\n    dots: true\n  });\n\n\n  $(document).ready(function() {\n      // Обработчик клика по заголовкам секций\n      $('.filter-header').on('click', function() {\n          $(this).parent().toggleClass('collapsed');\n      });\n\n      // Добавляем обработчики для чекбоксов\n      $('input[type=\"checkbox\"]').on('change', function() {\n          console.log(`${this.id}: ${this.checked}`);\n      });\n  });\n});\n\n// const gallerySwiper = new Swiper('.gallery__slider', {\n//   centeredSlides: true,\n//   slidesPerView: 3, // показываем 5 слайдов (1 активный + по 2 с каждой стороны)\n//   spaceBetween: -150,\n//   loop: true,\n\n//   navigation: {\n//     nextEl: '.gallery__slider .swiper-button-next',\n//     prevEl: '.gallery__slider .swiper-button-prev',\n//   },\n  \n//   breakpoints: {\n//     320: {\n//       slidesPerView: 1.5,\n//       // spaceBetween: 10\n//     },\n//     768: {\n//       slidesPerView: 3,\n//       // spaceBetween: 15\n//     },\n//     1024: {\n//       slidesPerView: 5,\n//       // spaceBetween: 20\n//     }\n//   },\n  \n\n// });\n\n\n"],"names":["jQuery","$","$wrap","svg","find","keys","map","this","data","get","autoIdx","console","log","autoTimer","isPaused","positionCards","getBoundingClientRect","each","x","key","node","querySelector","bb","left","width","wrapRect","y","top","css","showByKey","removeClass","addClass","$region","$pin","startAutoplay","stopAutoplay","setInterval","length","clearInterval","on","let","rAF","window","cancelAnimationFrame","requestAnimationFrame","slick","centerMode","centerPadding","slidesToShow","infinite","arrows","dots","autoplay","document","ready","parent","toggleClass","id","checked"],"mappings":"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"}