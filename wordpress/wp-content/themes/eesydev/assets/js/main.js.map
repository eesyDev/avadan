{"version":3,"file":"main.js","sources":["main.js"],"sourcesContent":["jQuery(function($){\n  const $wrap = $('.map__wrapper');\n  const svg   = $wrap.find('svg')[0];\n\n  // Собираем ключи из карточек в порядке показа\n  const keys = $('.map__card').map(function(){ return $(this).data('key'); }).get();\n\n  console.log(keys)\n  let autoIdx = 0, autoTimer = null, isPaused = false;\n\n  // Позиционируем карточки возле соответствующих пинов\n  function positionCards(){\n    if($wrap && $wrap[0]) {  const wrapRect = $wrap[0].getBoundingClientRect();\n    $('.map__card').each(function(){\n      const key = $(this).data('key');\n      const node = svg.querySelector('.pin[data-key=\"'+key+'\"]');\n      if(!node) return;\n      const bb = node.getBoundingClientRect();\n      const x = bb.left + bb.width/2 - wrapRect.left;\n      const y = bb.top  - wrapRect.top;\n      // позиция сверху и немного левее центра пина\n      $(this).css({ left: x+'px', top: y+'px' });\n    });\n  }\n  }\n\n  function clearActive(){\n    $('.map__card').removeClass('is-visible');\n    $(svg).find('.region, .pin').removeClass('is-active');\n  }\n\n  function showByKey(key){\n    clearActive();\n    $('.map__card[data-key=\"'+key+'\"]').addClass('is-visible');\n    const $region = $(svg).find('.region[data-key=\"'+key+'\"]');\n    const $pin    = $(svg).find('.pin[data-key=\"'+key+'\"]');\n    $region.addClass('is-active');\n    $pin.addClass('is-active');\n  }\n\n  function startAutoplay(){\n    stopAutoplay();\n    autoTimer = setInterval(function(){\n      if(isPaused || keys.length === 0) return;\n      showByKey(keys[autoIdx]);\n      autoIdx = (autoIdx + 1) % keys.length;\n    }, 1800); // скорость \"вспышек\"\n  }\n\n  function stopAutoplay(){\n    if(autoTimer){ clearInterval(autoTimer); autoTimer = null; }\n  }\n\n  // Наведение по региону или пину: показываем нужную карточку и паузим автоплей\n  $(svg).on('mouseenter touchstart', '.region, .pin', function(){\n    isPaused = true;\n    const key = $(this).data('key');\n    if(key) showByKey(key);\n  });\n\n  // Ушли курсором со svg — продолжаем автопоказ\n  $(svg).on('mouseleave touchend', function(){\n    isPaused = false;\n  });\n\n  // Клик по пину/региону — фиксируем карточку до следующего ухода мыши\n  $(svg).on('click', '.region, .pin', function(){\n    const key = $(this).data('key');\n    if(key){\n      stopAutoplay();\n      showByKey(key);\n    }\n  });\n\n  // Восстановить автоплей при уходе мыши с обёртки\n  $wrap.on('mouseleave', function(){\n    isPaused = false;\n    startAutoplay();\n  });\n\n  // Дебаунс-resize для корректной привязки позиций\n  let rAF;\n  function onResize(){ \n    cancelAnimationFrame(rAF);\n    rAF = requestAnimationFrame(positionCards);\n  }\n  $(window).on('load resize', onResize);\n\n  // Инициализация\n  positionCards();\n  showByKey(keys[0]);  // начальный показ первой карточки\n  startAutoplay();\n\n  $(document).ready(function() {\n    // Открытие модального окна\n    $('.openModal').click(function() {\n        $('#modalOverlay').addClass('active');\n        $('body').css('overflow', 'hidden'); // блокируем скролл\n    });\n\n    // Закрытие модального окна\n    function closeModal() {\n        $('#modalOverlay').removeClass('active');\n        $('body').css('overflow', 'auto'); // возвращаем скролл\n    }\n\n    // Закрытие по крестику\n    $('#closeModal').click(closeModal);\n\n    // Закрытие по клику на оверлей\n    $('#modalOverlay').click(function(e) {\n        if (e.target === this) {\n            closeModal();\n        }\n    });\n\n    // Закрытие по Escape\n    $(document).keyup(function(e) {\n        if (e.keyCode === 27 && $('#modalOverlay').hasClass('active')) {\n            closeModal();\n        }\n    });\n\n    // Маска для телефона (простая)\n    $('input[name=\"phone\"]').on('input', function() {\n        let value = this.value.replace(/\\D/g, '');\n        if (value.length > 0) {\n            if (value.length <= 10) {\n                value = value.replace(/(\\d{3})(\\d{3})(\\d{4})/, '+7 ($1) $2-$3');\n            }\n        }\n        this.value = value;\n    });\n});\n   \n\n  $('.gallery-slider').slick({\n    centerMode: true,\n    centerPadding: '0',\n    slidesToShow: 5,   // показываем 5 слайдов\n    infinite: true,\n    arrows: true,\n    dots: true\n  });\n\n  $('.director-slider').slick({\n    centerMode: true,\n    centerPadding: '0',\n    slidesToShow: 1,  \n    infinite: true,\n    autoplay: true,\n    arrows: false,\n    dots: true\n  });\n  $('.invite__slider').slick({\n    centerMode: true,\n    centerPadding: '0',\n    slidesToShow: 1,  \n    infinite: true,\n    // dots: true,\n    arrows: true,\n  });\n\n  $('.team-slider').slick({\n    centerMode: true,\n    centerPadding: '0',\n    slidesToShow: 2,  \n    infinite: true,\n    // dots: true,\n    arrows: true,\n  });\n\n  $('.team-reviews-slider').slick({\n    dots: true,\n    arrows: true,\n    infinite: true,\n    speed: 300,\n    slidesToShow: 1,\n    slidesToScroll: 1,\n    adaptiveHeight: false,\n    prevArrow: '<button class=\"slick-prev team-prev\">❮</button>',\n    nextArrow: '<button class=\"slick-next team-next\">❯</button>',\n});\n\n\n  $(document).ready(function() {\n      // Обработчик клика по заголовкам секций\n      $('.filter-header').on('click', function() {\n          $(this).parent().toggleClass('collapsed');\n      });\n\n      // Добавляем обработчики для чекбоксов\n      $('input[type=\"checkbox\"]').on('change', function() {\n          console.log(`${this.id}: ${this.checked}`);\n      });\n  });\n\n   // Переключение аккордеона\n   $('.faq-question').click(function() {\n    const $item = $(this).closest('.faq-item');\n    const $answer = $item.find('.faq-answer');\n    \n    if ($item.hasClass('active')) {\n        // Закрываем активный элемент\n        $answer.slideUp(300);\n        $item.removeClass('active');\n    } else {\n        // Закрываем все остальные элементы\n        $('.faq-item.active .faq-answer').slideUp(300);\n        $('.faq-item.active').removeClass('active');\n        \n        // Открываем выбранный элемент\n        $answer.slideDown(300);\n        $item.addClass('active');\n    }\n});\n\n    // Кнопка закрытия\n    $('.close-button').click(function() {\n        $(this).closest('.faq-container').fadeOut(300);\n    });\n\n    // Плавная анимация при загрузке\n    $('.faq-item').each(function(index) {\n        $(this).css({\n            'opacity': '0',\n            'transform': 'translateY(20px)'\n        }).delay(index * 100).animate({\n            'opacity': '1',\n            'transform': 'translateY(0)'\n        }, 500);\n    });\n\n\n    try {\n    const routeSliders = document.querySelectorAll('.route-slider');\n    \n    routeSliders.forEach(function(slider, index) {\n        new Swiper(slider, {\n            slidesPerView: 1,\n            spaceBetween: 20,\n            loop: true,\n            // autoplay: {\n            //     delay: 5000,\n            //     disableOnInteraction: false,\n            // },\n            \n            // Навигация привязывается к текущему слайдеру\n            navigation: {\n                nextEl: slider.querySelector('.swiper-button-next'),\n                prevEl: slider.querySelector('.swiper-button-prev'),\n            },\n            \n            // pagination: {\n            //     el: slider.querySelector('.swiper-pagination'),\n            //     clickable: true,\n            // },\n            \n            // breakpoints: {\n            //     768: {\n            //         slidesPerView: 2,\n            //     },\n            //     1024: {\n            //         slidesPerView: 3,\n            //     }\n            // }\n        });\n    });\n    } catch(err) {\n      console.log(err)\n    }\n});\n\n// const gallerySwiper = new Swiper('.gallery__slider', {\n//   centeredSlides: true,\n//   slidesPerView: 3, // показываем 5 слайдов (1 активный + по 2 с каждой стороны)\n//   spaceBetween: -150,\n//   loop: true,\n\n//   navigation: {\n//     nextEl: '.gallery__slider .swiper-button-next',\n//     prevEl: '.gallery__slider .swiper-button-prev',\n//   },\n  \n//   breakpoints: {\n//     320: {\n//       slidesPerView: 1.5,\n//       // spaceBetween: 10\n//     },\n//     768: {\n//       slidesPerView: 3,\n//       // spaceBetween: 15\n//     },\n//     1024: {\n//       slidesPerView: 5,\n//       // spaceBetween: 20\n//     }\n//   },\n  \n\n// });\n\n\n"],"names":["jQuery","$","$wrap","svg","find","keys","map","this","data","get","autoIdx","console","log","autoTimer","isPaused","positionCards","wrapRect","getBoundingClientRect","each","x","key","node","querySelector","bb","left","width","y","top","css","showByKey","removeClass","addClass","$region","$pin","startAutoplay","stopAutoplay","setInterval","length","clearInterval","on","let","rAF","window","cancelAnimationFrame","requestAnimationFrame","document","ready","closeModal","click","e","target","keyup","keyCode","hasClass","value","replace","slick","centerMode","centerPadding","slidesToShow","infinite","arrows","dots","autoplay","speed","slidesToScroll","adaptiveHeight","prevArrow","nextArrow","parent","toggleClass","id","checked","$item","closest","$answer","slideUp","slideDown","fadeOut","index","opacity","transform","delay","animate","querySelectorAll","forEach","slider","Swiper","slidesPerView","spaceBetween","loop","navigation","nextEl","prevEl","err"],"mappings":"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"}